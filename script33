-------------------------------------------------
-- Services
-------------------------------------------------
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-------------------------------------------------
-- GUI Create
-------------------------------------------------
local gui = Instance.new("ScreenGui")
gui.Name = "ProClickGUI"
gui.ResetOnSpawn = false
gui.Parent = PlayerGui

local main = Instance.new("Frame")
main.Size = UDim2.fromOffset(220, 240)
main.Position = UDim2.fromScale(0.05, 0.4)
main.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
main.BorderSizePixel = 0
main.Active = true
main.ClipsDescendants = true
main.Parent = gui
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 14)

-------------------------------------------------
-- Drag System
-------------------------------------------------
do
	local dragging, dragStart, startPos
	local function update(input)
		local delta = input.Position - dragStart
		main.Position = UDim2.new(
			startPos.X.Scale,
			startPos.X.Offset + delta.X,
			startPos.Y.Scale,
			startPos.Y.Offset + delta.Y
		)
	end
	main.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1
		or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = main.Position
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if dragging and (
			input.UserInputType == Enum.UserInputType.MouseMovement
			or input.UserInputType == Enum.UserInputType.Touch
		) then
			update(input)
		end
	end)
end

-------------------------------------------------
-- Title
-------------------------------------------------
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.Text = "âš¡ Pro Click Panel"
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.TextColor3 = Color3.fromRGB(255, 200, 80)
title.Parent = main

-------------------------------------------------
-- Button Template
-------------------------------------------------
local function createButton(text, posY, color)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0.9, 0, 0, 32)
	btn.Position = UDim2.new(0.05, 0, 0, posY)
	btn.BackgroundColor3 = color
	btn.Text = text
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 14
	btn.BorderSizePixel = 0
	btn.Parent = main
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 10)
	return btn
end

-------------------------------------------------
-- Buttons
-------------------------------------------------
local fireBtn = createButton("ğŸ”¥ Fire ClickDetectors", 38, Color3.fromRGB(70,140,255))
local promptBtn = createButton("âš¡ Instant Prompt: OFF", 76, Color3.fromRGB(255,90,90))
local swimBtn = createButton("ğŸŒŠ Swim Disable: OFF", 114, Color3.fromRGB(255,90,90))
local scanBtn = createButton("ğŸ’µ God Mode(KillBrick): OFF", 152, Color3.fromRGB(255,90,90))
local espBtn = createButton("ğŸ‘ï¸ ESP & Hitbox: OFF", 190, Color3.fromRGB(255,90,90))

-------------------------------------------------
-- Fire ClickDetectors
-------------------------------------------------
fireBtn.MouseButton1Click:Connect(function()
	for _, d in ipairs(workspace:GetDescendants()) do
		if d:IsA("ClickDetector") then
			pcall(function()
				fireclickdetector(d)
			end)
		end
	end
end)

-------------------------------------------------
-- Instant Prompt
-------------------------------------------------
local originalHoldTimes = {}
local instantPromptEnabled = false
local function applyPromptState(prompt)
	if not prompt:IsA("ProximityPrompt") then return end
	if originalHoldTimes[prompt] == nil then
		originalHoldTimes[prompt] = prompt.HoldDuration
	end
	if instantPromptEnabled then
		prompt.HoldDuration = 0
	else
		prompt.HoldDuration = originalHoldTimes[prompt]
	end
end
local function refreshAllPrompts()
	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj:IsA("ProximityPrompt") then
			applyPromptState(obj)
		end
	end
end
workspace.DescendantAdded:Connect(function(obj)
	if obj:IsA("ProximityPrompt") then
		task.wait()
		applyPromptState(obj)
	end
end)
promptBtn.MouseButton1Click:Connect(function()
	instantPromptEnabled = not instantPromptEnabled
	if instantPromptEnabled then
		promptBtn.Text = "âš¡ Instant Prompt: ON"
		promptBtn.BackgroundColor3 = Color3.fromRGB(80,200,120)
	else
		promptBtn.Text = "âš¡ Instant Prompt: OFF"
		promptBtn.BackgroundColor3 = Color3.fromRGB(255,90,90)
	end
	refreshAllPrompts()
end)

-------------------------------------------------
-- Swim Disable (Client-side best-effort)
-------------------------------------------------
local swimDisabled = false
local connections = {} -- Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ú©Ø§Ù†Ú©Ø´Ù†â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù‚Ø·Ø¹ Ø¯Ø± ØµÙˆØ±Øª Ù„Ø²ÙˆÙ…

-- Ú©Ù…Ú©â€ŒÚ©Ù†Ù†Ø¯Ù‡: Ø­Ø°Ù Body* Ø¯Ø§Ø®Ù„ Ú©Ø§Ø±Ø§Ú©ØªØ± (Ú©Ù‡ Ù…ÛŒØªÙˆÙ†Ù‡ Ø¨Ø§Ø¹Ø« Ø´Ù†Ø§ Ø¨Ø´Ù‡)
local function removeBodyForces(character)
	for _, obj in ipairs(character:GetDescendants()) do
		if obj:IsA("BodyVelocity") or obj:IsA("BodyForce") or obj:IsA("BodyPosition") or obj:IsA("VectorForce") or obj:IsA("AlignPosition") or obj:IsA("AlignOrientation") then
			pcall(function() obj:Destroy() end)
		end
	end
end

-- Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù¾Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø§Ø­ØªÙ…Ø§Ù„Ø§ "Ø¢Ø¨" Ù‡Ø³ØªÙ†Ø¯ Ùˆ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„Ø§ÛŒÙ†Øª Ù¾Ù†Ù‡Ø§Ù†â€ŒØ´Ø§Ù† Ú©Ù†
local function hideWaterPartsClientSide()
	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj:IsA("BasePart") then
			local ok, isWater = pcall(function()
				return (obj.Material == Enum.Material.Water) or (string.find(string.lower(obj.Name), "water") ~= nil)
			end)
			if ok and isWater then
				-- Ø§ÛŒÙ† Ø®Ø§ØµÛŒØª ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ client Ù…Ø­Ù„ÛŒ Ø§Ø«Ø± Ø¯Ø§Ø±Ø¯
				pcall(function()
					-- LocalTransparencyModifier Ù…Ù‚Ø¯Ø§Ø± Ø¨ÛŒÙ† 0..1 Ù…ÛŒÚ¯ÛŒØ±Ø¯Ø› 1 = Ú©Ø§Ù…Ù„Ø§ Ù¾Ù†Ù‡Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„Ø§ÛŒÙ†Øª
					obj.LocalTransparencyModifier = 1
				end)
				-- ØªÙ„Ø§Ø´ Ù…ÛŒÚ©Ù†ÛŒÙ… Ø¨Ø±Ø®ÙˆØ±Ø¯ Ø±Ø§ Ù‡Ù… ØºÛŒØ±Ù‚Ø§Ø¨Ù„ Ù„Ù…Ø³ Ú©Ù†ÛŒÙ… (Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ø±Ø§ÛŒ Ø³Ø±ÙˆØ± Ù‡Ù… ØªÙ„Ø§Ø´ Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯ Ùˆ Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ú¯Ø±ÙØªÙ‡ Ø´ÙˆØ¯)
				pcall(function() obj.CanCollide = false end)
			end
		end
	end
end

-- Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ø­Ø§Ù„Øª Ù¾Ù†Ù‡Ø§Ù†â€ŒØ³Ø§Ø²ÛŒ (Ø¯Ø± ØµÙˆØ±Øª Ø®Ø§Ù…ÙˆØ´ Ø´Ø¯Ù†)
local function unhideWaterPartsClientSide()
	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj:IsA("BasePart") then
			local ok, isWater = pcall(function()
				return (obj.Material == Enum.Material.Water) or (string.find(string.lower(obj.Name), "water") ~= nil)
			end)
			if ok and isWater then
				pcall(function() obj.LocalTransparencyModifier = 0 end)
				-- Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ú¯Ø±ÙØªÙ† Ø®Ø·Ø§ Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ
			end
		end
	end
end

-- ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ ÙÙˆØ±Ø§Ù‹ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø­Ø§Ù„Øª Ø´Ù†Ø§ Ø¨Ø±Ø§ÛŒ ÛŒÚ© Humanoid/Character
local function disableSwimImmediate(character)
	if not character or not character.Parent then return end
	local humanoid = character:FindFirstChildOfClass("Humanoid")
	local root = character:FindFirstChild("HumanoidRootPart") or character:FindFirstChild("Torso") or character:FindFirstChild("UpperTorso")
	if humanoid then
		-- Ø­Ø°Ù Ù†ÛŒØ±ÙˆÙ‡Ø§ÛŒ Ø§Ø­ØªÙ…Ø§Ù„ÛŒ
		removeBodyForces(character)

		-- ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† State Swimming
		pcall(function() humanoid:ChangeState(Enum.HumanoidStateType.Running) end)
		-- Ø§Ú¯Ø± Ù…ØªØ¯ SetStateEnabled Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ø´Ù‡ØŒ Ø³Ø¹ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… Swimming Ø±Ùˆ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ù†ÛŒÙ… (Ø§ÛŒÙ† Ù…Ù…Ú©Ù†Ù‡ client-side Ø¹Ù…Ù„ Ú©Ù†Ù‡)
		pcall(function() humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming, false) end)

		-- Ú©Ù…ÛŒ Ø¨Ø§Ø²ÛŒÚ©Ù† Ø±Ùˆ Ø¨Ù‡ Ø¨Ø§Ù„Ø§ Ù‡Ù„ Ù…ÛŒØ¯ÛŒÙ… ØªØ§ Ø§Ø² Ø¢Ø¨ Ø¨ÛŒØ±ÙˆÙ† Ø¨ÛŒØ§Ø¯ (Ø§ÛŒÙ† Ø±ÙˆÛŒ Ú©Ù„Ø§ÛŒÙ†Øª Ø§Ø¹Ù…Ø§Ù„ Ù…ÛŒØ´Ù‡)
		if root then
			pcall(function()
				-- Ø­Ø±Ú©ØªÛŒ Ú©ÙˆÚ†Ú© Ø¨Ù‡ Ø¨Ø§Ù„Ø§ (ØªÙ†Ø¸ÛŒÙ… Ø¹Ø¯Ø¯ Ø§Ú¯Ø± Ù„Ø§Ø²Ù… Ø¨ÙˆØ¯)
				local safeOffset = Vector3.new(0, 3, 0)
				root.CFrame = root.CFrame + safeOffset
				-- Ùˆ Ø³Ø±Ø¹Øª Ø¹Ù…ÙˆØ¯ÛŒ Ø±Ùˆ ØµÙØ± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
				root.Velocity = Vector3.new(root.Velocity.X, 0, root.Velocity.Z)
			end)
		end
	end
end

-- ÙˆÙ‚ØªÛŒ Ø¨Ø§Ø²ÛŒÚ©Ù† ÙˆØ§Ø±Ø¯ Ø¢Ø¨ ÛŒØ§ Ø­Ø§Ù„Øª Ø´Ù†Ø§ Ù…ÛŒØ´Ù‡ØŒ Ø§ÛŒÙ† Ø§Ø¬Ø±Ø§ Ù…ÛŒØ´Ù‡
local function onCharacterAdded(character)
	-- Ù‚Ø·Ø¹ Ú©Ø§Ù†Ú©Ø´Ù†â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ù…Ø±ØªØ¨Ø· Ø¨Ø§ Ú©Ø§Ø±Ø§Ú©ØªØ± (Ø§ÛŒÙ…Ù† Ø³Ø§Ø²ÛŒ)
	if connections[character] then
		for _, c in ipairs(connections[character]) do
			pcall(function() c:Disconnect() end)
		end
	end
	connections[character] = {}

	-- ÙˆØµÙ„ Ø´Ø¯Ù† Ø¨Ù‡ StateChanged
	local humanoid = character:FindFirstChildOfClass("Humanoid")
	local root = character:WaitForChild("HumanoidRootPart", 5) -- ØµØ¨Ø± Ú©ÙˆØªØ§Ù‡ Ø¨Ø±Ø§ÛŒ Root

	if humanoid then
		local connState = humanoid.StateChanged:Connect(function(old, new)
			if swimDisabled and new == Enum.HumanoidStateType.Swimming then
				-- ÙˆÙ‚ØªÛŒ ÙˆØ¶Ø¹ÛŒØª Ø´Ù†Ø§ ÙØ¹Ø§Ù„ Ø´Ø¯ØŒ ÙÙˆØ±ÛŒ ØºÛŒØ±ÙØ¹Ø§Ù„Ø´ Ú©Ù†
				disableSwimImmediate(character)
			end
		end)
		table.insert(connections[character], connState)
	end

	-- ØªØ´Ø®ÛŒØµ Ø¨Ø±Ø®ÙˆØ±Ø¯ Ø¨Ø§ Ù¾Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ø¨ (Touched)
	if root then
		local connTouch = root.Touched:Connect(function(part)
			if not swimDisabled then return end
			local ok, isWater = pcall(function()
				return (part.Material == Enum.Material.Water) or (string.find(string.lower(part.Name), "water") ~= nil)
			end)
			if ok and isWater then
				-- ÙÙˆØ±Ø§Ù‹ Ø´Ù†Ø§ Ø±Ùˆ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ù† Ùˆ Ø¢Ù† Ù¾Ø§Ø±Øª Ø¢Ø¨ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„Ø§ÛŒÙ†Øª Ù¾Ù†Ù‡Ø§Ù† Ú©Ù†
				disableSwimImmediate(character)
				pcall(function()
					part.LocalTransparencyModifier = 1
					part.CanCollide = false
				end)
			end
		end)
		table.insert(connections[character], connTouch)
	end
end

-- Ø§Ú¯Ø± Ú©Ø§Ø±Ø§Ú©ØªØ± Ù‡Ù…ÛŒÙ† Ø§Ù„Ø§Ù† ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù‡
if LocalPlayer.Character then
	onCharacterAdded(LocalPlayer.Character)
end
LocalPlayer.CharacterAdded:Connect(onCharacterAdded)

-- Ø¯Ú©Ù…Ù‡ ON / OFF
swimBtn.MouseButton1Click:Connect(function()
	swimDisabled = not swimDisabled

	if swimDisabled then
		swimBtn.Text = "ğŸŒŠ Swim Disable: ON"
		swimBtn.BackgroundColor3 = Color3.fromRGB(80, 200, 120)

		-- Ø§Ø¹Ù…Ø§Ù„ Ù…Ø®ÙÛŒâ€ŒØ³Ø§Ø²ÛŒ Ø¢Ø¨ Ø¨Ø±Ø§ÛŒ PartÙ‡Ø§ Ùˆ ØºÛŒØ±ÙØ¹Ø§Ù„Ø³Ø§Ø²ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø´Ù†Ø§ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø§Ú©ØªØ± ÙØ¹Ù„ÛŒ
		hideWaterPartsClientSide()
		if LocalPlayer.Character then
			disableSwimImmediate(LocalPlayer.Character)
		end
	else
		swimBtn.Text = "ğŸŒŠ Swim Disable: OFF"
		swimBtn.BackgroundColor3 = Color3.fromRGB(255,90,90)

		-- Ø¨Ø±Ú¯Ø±Ø¯ÙˆÙ†Ø¯Ù† Ø­Ø§Ù„Øª Ø¢Ø¨â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ù…Ø§ Ù…Ø­Ù„ÛŒ Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯ÛŒÙ…
		unhideWaterPartsClientSide()
		-- Ø§Ú¯Ø± Ø®ÙˆØ§Ø³ØªÛŒ Ù…ÛŒØ´Ù‡ Ø¯ÙˆØ¨Ø§Ø±Ù‡ State Swimming Ø±Ùˆ ÙØ¹Ø§Ù„ Ú¯Ø°Ø§Ø´Øª (Ù…Ø§ Ø¨Ù‡ Ø·ÙˆØ± Ù…Ø´Ø®Øµ Ú©Ø§Ø±ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… ØªØ§ Ø¨Ø§Ø²ÛŒ Ø±ÙØªØ§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø±Ø§ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯)
	end
end)

-------------------------------------------------
-- Name2 Smart Scanner (2 Layer System)
-------------------------------------------------
local scanning = false
local scanCompleted = false
local blacklist = {}
local originalTouch = {}

-- ğŸŸ¥ Ù„ÛŒØ³Øª Ø¹Ù…ÙˆÙ…ÛŒ (Ù†ÛŒÙ…Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯)
local dangerNames = {
	"kill","killpart","killbrick","killzone",
	"lava","acid","toxic",
	"damage","hurt","death","die",
	"void","fall","burn","fire",
	"explode","laser","trap","spike",
	"danger","hazard","pusher","damagepart"
}

-- ğŸŸ¨ Ù„ÛŒØ³Øª Ø¯Ù‚ÛŒÙ‚ (100% Ø®Ø·Ø±Ù†Ø§Ú©)
local exactNames = {
	"Part",
	"part"
}

local function notify(text)
	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(0, 250, 0, 40)
	label.Position = UDim2.new(1, -260, 1, -60)
	label.BackgroundColor3 = Color3.fromRGB(20,20,20)
	label.TextColor3 = Color3.new(1,1,1)
	label.Text = text
	label.Font = Enum.Font.GothamBold
	label.TextSize = 14
	label.Parent = gui
	Instance.new("UICorner", label)
	task.delay(2, function() label:Destroy() end)
end

-- ğŸ§  Ú†Ú© Ø®Ø·Ø±
local function isDanger(part)
	local name = part.Name

	-- ğŸ”¥ Ú†Ú© Ø¯Ù‚ÛŒÙ‚ (Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§Ù„Ø§)
	for _, exact in ipairs(exactNames) do
		if name == exact then
			return true
		end
	end

	-- ğŸ”¥ Ú†Ú© Ø¹Ù…ÙˆÙ…ÛŒ
	name = name:lower()
	for _, word in ipairs(dangerNames) do
		if string.find(name, word) then
			return true
		end
	end

	return false
end

local function disableTouch(part)
	if part:IsA("BasePart") then
		-- ÙÙ‚Ø· Ú†ÛŒØ²Ø§ÛŒÛŒ Ú©Ù‡ ÙˆØ§Ù‚Ø¹Ø§ ØªØ§Ú† Ø¯Ø§Ø±Ù†
		if part.CanTouch then
			if originalTouch[part] == nil then
				originalTouch[part] = part.CanTouch
			end
			part.CanTouch = false
		end
	end
end

local function restoreTouch()
	for part, state in pairs(originalTouch) do
		if part and part.Parent then
			part.CanTouch = state
		end
	end
end

local function fakeScan()
	if scanCompleted then
		notify("Using saved scan...")
		for part,_ in pairs(blacklist) do
			disableTouch(part)
		end
		return
	end

	scanning = true
	notify("Scan Started...")

	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj:IsA("BasePart") then
			if isDanger(obj) then
				blacklist[obj] = true
			end
		end
	end

	task.wait(1)

	for part,_ in pairs(blacklist) do
		disableTouch(part)
	end

	scanning = false
	scanCompleted = true
	notify("Scan Completed âœ…")
end

scanBtn.MouseButton1Click:Connect(function()
	if scanning then return end

	local enabled = scanBtn.Text:find("ON")

	if enabled then
		scanBtn.Text = "ğŸ’µ God Mode(KillBrick): OFF"
		scanBtn.BackgroundColor3 = Color3.fromRGB(255,90,90)
		restoreTouch()
	else
		scanBtn.Text = "ğŸ’µ God Mode(KillBrick): ON"
		scanBtn.BackgroundColor3 = Color3.fromRGB(80,200,120)

		if not scanCompleted then
			task.spawn(fakeScan)
		else
			for part,_ in pairs(blacklist) do
				disableTouch(part)
			end
		end
	end
end)

-------------------------------------------------
-- Final ESP, Tracer, Hitbox & Wallshot (Optimized)
-------------------------------------------------
local espEnabled = false
local tracerFolder = gui:FindFirstChild("TracerFolder") or Instance.new("Folder", gui)
tracerFolder.Name = "TracerFolder"

-- ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù‡ÛŒØªâ€ŒØ¨Ø§Ú©Ø³ (Ø³Ø§ÛŒØ² 40 Ø·Ø¨Ù‚ Ø¢Ø®Ø±ÛŒÙ† Ù†Ø³Ø®Ù‡ Ù…ÙˆÙÙ‚)
local HB_SIZE = 40

RunService.RenderStepped:Connect(function()
    if not espEnabled then 
        tracerFolder:ClearAllChildren()
        return 
    end

    tracerFolder:ClearAllChildren()

    for _, v in ipairs(game:GetService('Players'):GetPlayers()) do
        if v.Name ~= LocalPlayer.Name and v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
            -- Û±. Ø¨Ø®Ø´ Ù‡ÛŒØªâ€ŒØ¨Ø§Ú©Ø³ Ùˆ Wallshot (Ø¨Ù‡ÛŒÙ†Ù‡ Ø´Ø¯Ù‡)
            pcall(function()
                local root = v.Character.HumanoidRootPart
                root.Size = Vector3.new(HB_SIZE, HB_SIZE, HB_SIZE)
                root.Transparency = 1 -- Ù†Ø§Ù…Ø±Ø¦ÛŒ Ø¨Ø±Ø§ÛŒ ÙˆØ§Ù„â€ŒØ´Ø§Øª ØªÙ…ÛŒØ²
                root.CanCollide = false -- Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú¯ÛŒØ± Ú©Ø±Ø¯Ù† Ø¯Ø± Ø²Ù…ÛŒÙ†
                root.CanQuery = true -- Ú©Ù„ÛŒØ¯ Ø§ØµÙ„ÛŒ Wallshot (Ø§Ø¬Ø§Ø²Ù‡ Ø¨Ø±Ø®ÙˆØ±Ø¯ ØªÛŒØ± Ø§Ø² Ù¾Ø´Øª Ø¯ÛŒÙˆØ§Ø±)
                
                -- Ø§Ø¹Ù…Ø§Ù„ ESP (Highlight)
                local hl = v.Character:FindFirstChild("ESPHighlight") or Instance.new("Highlight", v.Character)
                hl.Name = "ESPHighlight"
                hl.FillColor = Color3.fromRGB(255, 255, 0)
                hl.Enabled = true
            end)

            -- Û². Ø¨Ø®Ø´ Tracer (Ø®Ø· Ø±Ø§Ù‡Ù†Ù…Ø§)
            pcall(function()
                local root = v.Character.HumanoidRootPart
                local pos, onScreen = workspace.CurrentCamera:WorldToViewportPoint(root.Position)
                if onScreen then
                    local line = Instance.new("Frame")
                    line.BackgroundColor3 = Color3.fromRGB(255, 255, 0)
                    line.BorderSizePixel = 0
                    line.AnchorPoint = Vector2.new(0.5, 0.5)
                    local startPos = Vector2.new(workspace.CurrentCamera.ViewportSize.X / 2, workspace.CurrentCamera.ViewportSize.Y)
                    local endPos = Vector2.new(pos.X, pos.Y)
                    local distance = (startPos - endPos).Magnitude
                    line.Size = UDim2.fromOffset(distance, 1.2)
                    line.Position = UDim2.fromOffset((startPos.X + endPos.X) / 2, (startPos.Y + endPos.Y) / 2)
                    line.Rotation = math.deg(math.atan2(endPos.Y - startPos.Y, endPos.X - startPos.X))
                    line.Parent = tracerFolder
                end
            end)
        end
    end
end)

-- Ú©Ø¯ Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ Ø±ÙˆØ´Ù† Ùˆ Ø®Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù†
espBtn.MouseButton1Click:Connect(function()
    espEnabled = not espEnabled
    
    if espEnabled then
        espBtn.Text = "ğŸ¯ Wallshot & ESP: ON"
        espBtn.BackgroundColor3 = Color3.fromRGB(80, 200, 120)
    else
        espBtn.Text = "ğŸ¯ Wallshot & ESP: OFF"
        espBtn.BackgroundColor3 = Color3.fromRGB(255, 90, 90)
        
        -- Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… Ø¨Ø§Ø²ÛŒÚ©Ù†â€ŒÙ‡Ø§ Ø¨Ù‡ Ø­Ø§Ù„Øª Ø¹Ø§Ø¯ÛŒ
        for _, v in ipairs(game:GetService('Players'):GetPlayers()) do
            pcall(function()
                if v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
                    local root = v.Character.HumanoidRootPart
                    root.Size = Vector3.new(2, 2, 1)
                    root.Transparency = 1
                    root.CanCollide = true
                    root.CanQuery = true -- Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ø¨Ù‡ Ø­Ø§Ù„Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶
                    if v.Character:FindFirstChild("ESPHighlight") then
                        v.Character.ESPHighlight.Enabled = false
                    end
                end
            end)
        end
        tracerFolder:ClearAllChildren()
    end
end)
-------------------------------------------------
-- Fixed WallShot (Object Remover)
-------------------------------------------------
local WallWaitTime = 5 -- Ù…Ø¯Øª Ø²Ù…Ø§Ù† ØºÛŒØ¨ Ø¨ÙˆØ¯Ù† (Ø«Ø§Ù†ÛŒÙ‡)

UserInputService.InputBegan:Connect(function(input, gpe)
    if gpe then return end 
    
    if input.UserInputType == Enum.UserInputType.MouseButton1 and espEnabled then
        local mouse = LocalPlayer:GetMouse()
        local target = mouse.Target
        
        -- Ø´Ø±Ø· Ù…Ù‡Ù…: Ù‡Ø¯Ù Ù†Ø¨Ø§ÛŒØ¯ Ù‡ÛŒØªâ€ŒØ¨Ø§Ú©Ø³ Ø®ÙˆØ¯Ù…ÙˆÙ† (HumanoidRootPart Ø¨Ø²Ø±Ú¯ Ø´Ø¯Ù‡) ÛŒØ§ Ú©Ø§Ø±Ø§Ú©ØªØ± Ø®ÙˆØ¯Ù…ÙˆÙ† Ø¨Ø§Ø´Ù‡
        if target and target:IsA("BasePart") then
            local isAHitbox = (target.Name == "HumanoidRootPart") -- Ø§Ú¯Ù‡ Ø§Ø³Ù…Ø´ HRP Ø¨ÙˆØ¯ ÛŒØ¹Ù†ÛŒ Ù‡ÛŒØªâ€ŒØ¨Ø§Ú©Ø³Ù‡
            local isAPlayer = target.Parent:FindFirstChildOfClass("Humanoid")
            
            -- ÙÙ‚Ø· Ø§Ú¯Ù‡ Ø¯ÛŒÙˆØ§Ø± ÛŒØ§ Ù¾Ø§Ø±Øª Ù…Ø¹Ù…ÙˆÙ„ÛŒ Ø¨ÙˆØ¯ (Ù†Ù‡ Ø¢Ø¯Ù…) ØºÛŒØ¨Ø´ Ú©Ù†
            if not isAPlayer and not target:IsDescendantOf(LocalPlayer.Character) then
                pcall(function()
                    if target.Size.Magnitude < 200 then -- Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¬Ø§Ø¨Ø¬Ø§ÛŒÛŒ Ø²Ù…ÛŒÙ† Ø§ØµÙ„ÛŒ
                        local originalCFrame = target.CFrame
                        local originalAnchored = target.Anchored
                        
                        -- ÙØ±Ø³ØªØ§Ø¯Ù† Ø¨Ù‡ Ø¢Ø³Ù…Ø§Ù†
                        target.Anchored = true
                        target.CFrame = originalCFrame + Vector3.new(0, 5000, 0)
                        
                        -- Ø¨Ø±Ú¯Ø´Øª Ø¨Ø¹Ø¯ Ø§Ø² Ø²Ù…Ø§Ù† ØªØ¹ÛŒÛŒÙ† Ø´Ø¯Ù‡
                        task.delay(WallWaitTime, function()
                            if target and target.Parent then
                                target.CFrame = originalCFrame
                                target.Anchored = originalAnchored
                            end
                        end)
                    end
                end)
            end
        end
    end
end)

-------------------------------------------------
-- Color Animation
-------------------------------------------------
task.spawn(function()
	while true do
		for h = 0, 1, 0.02 do
			title.TextColor3 = Color3.fromHSV(h, 0.8, 1)
			task.wait(0.05)
		end
	end
end)
